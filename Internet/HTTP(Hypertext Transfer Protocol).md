# HTTP(Hypertext Transfer Protocol)

## 정의

- 인터넷상에서 데이터를 주고 받기 위한 서버/클라이언트 모델을 따르는 프로토콜.
- OSI 7 layer 중 Application(응용) 계층의 프로토콜로, TCP/IP 위에서 작동한다.
- 어떤 종류의 데이터든지 전송할 수 있도록 설계돼 있다.(HTML, Image, Video, Audio, Text 등)
- 링크 기반으로 데이터에 접속하겠다는 의미이다.

## 작동방식

- 클라이언트에서 요청(Request)를 보내면 서버는 요청을 처리해서 응답(Response)한다.
  

  ### 클라이언트

  - 서버에 요청하는 클라이언트 소프트웨어(IE, Chrome 등)가 설치된 컴퓨터를 이용한다.
  - 클라이언트는 URL을 이용해서 서버에 접속하고, 데이터를 요청할 수 있다. 
    

  ### 서버

  - 클라이언트의 요청을 받아서 요청 해석 및 응답하는 소프트웨어가 설치된 컴퓨터(Apache, nginx 등)가 서버 소프트웨어이다.
  - 웹 서버는 보통 표준 포트인 80번 포트로 서비스한다.

## 특징

### Connectless & Stateless

- 서버에 연결 및 요청 후, 응답을 받으면 연결을 끊어버린다.

- 기본적으로 자원 하나 당 연결 한개를 만든다.

  

  #### Connectless & Stateless 장점

  - 불특정 다수를 대상으로 하는 서비스에 적합한 방식이다.
  - 접속 유지의 트래픽 사용이 최소가 되기 때문에, 더 많은 유저 요청을 처리할 수 있다.
    

  #### Connectless & Stateless 단점

  - 연결을 끊기 때문에 클라이언트의 이전 상태를 알 수 없다.(Stateless)
  - 로그인 후, 유저 정보를 유지할 수 없다. 
    - Cookie 및 Session으로 HTTP 단점을 해결한다.
    - 첫 요청 시 클라이언트 로그인 성공하면 서버 로그인 정보를 DB에 저장 후 클라이언트에 cookie값 리턴.
      (서버는 cookie를 key로 하는 값을 DB에 저장하는 방식으로 세션 유지)
    - 두번째 요청 시 클라이언트 가 서버에 쿠키 요청, 서버는 DB조회 후 로그인 여부 확인

### Method

- 메서드는 요청의 종류를 서버에 알려주기 위해 사용한다.

- 메서드 종류

  - GET : 정보 요청(SELECT)
  - POST : 정보 삽입(INSERT)
  - PUT : 정보 전체 수정 (UPDATE)
  - PATCH : 정보 부분 수정 (UPDATE)
  - DELETE : 정보 삭제 (DELETE)

  - HEAD : HTTP 헤더 정보만 요청한다. 해당 자원이 존재하는지 혹은 서버에 문제가 있는지 확인하기 위해 사용한다.
  - OPTIONS : 웹 서버가 지원하는 메서드 종류를 요청한다.
  - TRACE : 클라이언트의 요청을 그대로 반복한다. echo 서비스로 서버 상태를 확인하기 위한 목적으로 사용된다.

- 자원의 위치 뿐만 아니라 할 일까지 명시할 수 있다.

### 응답 헤더

- 200 : 서버 요청 처리 성공
- 400 : 잘못된 요청 : 주로 헤더 format이 HTTP 규약에 맞지 않을 경우
- 403 : 금지 : 서버가 요청 거부함
- 404 : 찾을 수 없음 : 요청한 자원이 서버에 존재하지 않는다.

### Keep Alive

- HTTP는 웹 페이지 하나 표시할 때 수없이 연결을 맺고 끊기 때문에, 비효율적이다.

- Keep Alive 설정 시, 지정된 시간동안 연결을 끊지 않고 요청을 계속해서 보낼 수 있다.

- ```html
  Connection: Keep-Alive 
  Keep-Alive:timeout=5, max=200
  ```

- Keep Alive는 하나의 연결로 여러 요청을 하기 때문에 효율적이다.

- 하지만 연결이 길어지기 때문에 동시간대 연결이 늘어난다.

- 운영체제에서 연결은 유한한 자원이기에, 연결을 다 써버리면 서버는 더 이상 연결을 받을 수 없다.

- 때문에 Max값을 지정해 Keep-Alive 연결을 제한한다.



## 참고 페이지

[http 관련](https://shlee0882.tistory.com/107)