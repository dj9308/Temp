# 1. 네트워크 입문



## 1) User mode vs Kernel mode

![image-20230223155547063](C:\Users\dj930\OneDrive\사진\Typora\image-20230223155547063.png)

![image-20230224135901707](../../../../../../사진/Typora/image-20230224135901707.png)

- 네트워크 추상화가 이뤄진 파일을 소켓이라고 부른다. 소켓을 여는 주체는 프로세스이다. ★
- NIC(Network Interface Card)는 네트워크 장치로, 컴퓨터와 네트워크 사이의 연결을 제공하는 카드 또는 모듈이다. 일반적으로 컴퓨터의 마더보드에 설치되며 이더넷, 와이파이 또는 기타 네트워크 프로토콜을 사용하여 데이터를 전송한다.

### 개요

- 범용 운영체제는 User mode와 Kernal mode가 존재한다.
- 커널에서 중요한 자원을 관리하기 때문에, 사용자가 그 자원에 접근하지 못하도록 모드를 두 가지로 나눈 것이다.

### User Mode

- 유저(사용자)가 접근할 수 있는 영역을 제한적으로 두고, 프로그램의 자원에 함부로 침범하지 못하는 모드이다.
- 우리는 여기서 코드를 작성하고, 프로세스를 실행하는 등의 행동을 할 수 있다.
- 간단하게 "**유저 어플리케이션 코드가 유저 모드에서 실행된다.**" 라고 말할 수 있다.

### Kernel Mode

- 모든 자원(드라이버, 메모리, CPU 등)에 접근, 명령을 할 수 있다.
- 유저 모드와는 달리 컴퓨터 내부에서 모든 권한을 가지고 있다.

### User Mode와 Kernel Mode의 전환

- 프로세스가 실행되는 동안 프로세스는 수 없이 User Mode와 Kernel Mode를 계속 전환하면서 실행이 된다.
- User Mode -> Kernel Mode 요청 : 프로세스가 User Mode에서 실행되다가 특별한 요청이 필요할 때 system call을 이용해서 커널에 요청한다.
- Kernel Mode -> User Mode 반환 : system call의 요청을 받은 커널이 그 요청에 대한 일을 하고 결과 값을 system call의 리턴 값으로 전달한다.



## 2) Buffer

- Buffer는 데이터를 한 곳에서 다른 한 곳으로 전송하는 동안 일시적으로 그 데이터를 보관하는 메모리의 영역이다. 버퍼는 컴퓨터 안의 프로세스 사이에서 데이터를 이동시킬 때 사용된다. 
- 버퍼링(buffering)이란 버퍼를 활용하는 방식 또는 버퍼를 채우는 동작을 말한다. 다른 말로 '큐(Queue)'라고도 표현한다. 
- 버퍼는 컴퓨터 안의 프로세스 사이에서 데이터를 이동시킬 때 사용된다. 보통 데이터는 키보드와 같은 입력 장치로부터 받거나 프린터와 같은 출력 장치로 내보낼 때 버퍼 안에 저장된다. 버퍼는 하드웨어나 소프트웨어에 추가될 수 있지만 버퍼는 상당수가 소프트웨어에 추가된다. 버퍼는 보통 속도가 계속 바뀔 수 있으므로 데이터 수신, 처리 속도에 차이가 있다.
- 버퍼는 네트워크 상에서 자료를 주고 받을 때나 스피커에 소리를 재생할 때, 또는 디스크 드라이브와 같은 하드웨어의 입출력을 결합하는 데에 자주 이용된다. 버퍼는 또한 순서대로 데이터를 출력하는 방식에서 보통 사용된다.



## 3) Layer & Layered 구조

- 컴퓨터 네트워크의 프로토콜 스택에서 서로 다른 기능을 담당하는 계층을 의미한다.
- 주로 OSI 모델이나 TCP/IP 모델 등에서 사용된다.
- Layered 구조로 나왔다는 것은 존립이 의존적으로 나왔다는 것을 뜻한다. (1열 종대)



## 4) 네트워크

- 네트워크는 결국 관계이다. 네트워킹은 상호작용이다.
- 상호작용 시 계층별로 규칙을 정하는데 이를 프로토콜이라 한다.
- 이 규칙을 계층 구조로 나누고 나열한 것이 OSI 7 LAYER이다.



## 5) OSI 7 Layer와 식별자

![image-20230224155557429](C:\Users\dj930\OneDrive\사진\Typora\image-20230224155557429.png)

- 물리적 주소는 MAC Address 라고도 한다.
- Ethernet는 유선 네트워크를 뜻한다.
- 하드웨어 계층은 NIC이 존재하며, 소프트웨어 계층은 Driver가 존재한다.
- 크롬은 Application 계층(HTTP) 부터 Session 계층(SSL)까지 포함한다.
- TCP는 Transport 계층이며, IP는 인터넷 계층이다. 



### 식별자

- L2 (Data Link 계층, Ethernet) Frame의 경우 식별자는 MAC Address (Physical Address)이다.
- **MAC 주소는 LAN 카드(NIC)를 구분하는 식별자이다.**
  - cmd에 ipconfig /all 이라고 치면 MAC 주소(물리적 주소)를 확인할 수 있다.
- L3 (Network 계층, Internet) Packet의 식별자는 IP 주소이다. **IP 주소는 인터넷을 사용하는 컴퓨터(HOST)를 구분하는 식별자이다.**
- L4 (Transport 계층, TCP) 수준의 식별자는 PORT 번호이다. PORT 번호는 관점에 따라 식별자가 달라진다.
  - L2 계층에서 PORT 식별자는 인터페이스 식별자라고 말한다.(유선 케이블 단자)
  - L3, L4 계층는 Service 식별자라고 말한다. (웹 서비스가 쓰는 PORT를 열어야 하기 때문에)
  - L5 이상은 Process 식별자라고 한다.



## 6) HOST

- HOST는 네트워크에 연결된 컴퓨터를 말한다.
- SWITCH는 네트워크 그 자체를 이루는 HOST이다. InfraStructure라고 하며, IP 주소가 붙는 HOST는 SWITCH라고 보면 된다. (L2 스위치 제외)
- SWITCH의 대표적인 경우는 Router, IPS(Security Switch), Tab, Arggregation 등이 있다.
- End-point 단말기라고도 불리며, 네트워크 이용 주체이다. 즉, InfraStructure를 써먹는 존재라고 할 수 있다. 
- End-point의 대표적인 경우가 Client, Server, Peer 등이 있다.



## 7) Switch = 교차로

#### 정의 및 특징

- 스위치는 네트워크에서 데이터를 전송하는 장비 중 하나로, 여러 대의 컴퓨터나 기타 네트워크 기기 간의 통신을 가능하게 한다.
- 스위치는 물리적인 주소인 MAC 주소를 기반으로 패킷을 전송하며, 목적지 MAC 주소를 확인하여 해당 목적지로 패킷을 전달한다.
- 스위치는 브로드캐스트 도메인을 분리함으로써, 네트워크 트래픽의 양을 줄이고 네트워크의 안정성을 향상시킨다.
- 스위치는 각각의 포트에서 속도와 트래픽 흐름을 관리하여 효율적인 데이터 전송을 가능하게 한다.
- 경로 선택(Interface 선택)을 하는 것을 스위칭이라고 한다.
- 근거에 따라 스위칭을 하는데 그 근거는 ip 주소이다. (L3 스위칭)
- 목적지에 도달하기 위해 중간마다 스위치를 만나는데, 그 L3 스위치를 라우터라고 한다.
- 라우터는 L3 스위치의 일종인데, 라우터마다 이정표(라우팅 테이블)을 가지고 있다.
- 만약 MAC 주소를 근거로 스위칭을 할 경우 L2 스위칭이다.
- PORT 번호 가지고 스위칭을 할 경우, L4 스위칭이다.
- HTTP를 가지고 스위칭을 할 경우, L7 스위칭이다.

#### L2 스위치

- L2 스위치는 OSI 7계층 중 2계층인 데이터 링크 계층에서 동작하는 네트워크 스위치이다. 
- L2 스위치는 맥(MAC) 주소를 기반으로 스위칭을 수행한다. 
- 스위치의 포트는 모두 물리적으로 분리되어 있으며, 각각의 포트는 단일 충돌 도메인을 형성한다. 
- L2 스위치는 LAN에서 흔히 사용되며, 다음과 같은 기능을 제공한다.
  1. 스위칭 : L2 스위치는 맥(MAC) 주소를 기반으로 스위칭을 수행한다. 스위치는 목적지 맥 주소를 검색하여 해당 포트로 프레임을 전달한다.
  2. 포트 분리 : L2 스위치는 각각의 포트를 물리적으로 분리하여 단일 충돌 도메인을 형성한다. 이를 통해 포트 간 충돌을 방지하고, 전송 성능을 향상시킨다.
  3. MAC 주소 학습 : L2 스위치는 수신한 프레임의 송신자 맥 주소를 학습하고, 맥 주소 테이블에 저장한다. 이를 통해 스위치는 다음에 해당 맥 주소로 전송할 때 포트를 빠르게 결정할 수 있다.
  4. 브로드캐스트 제어: L2 스위치는 브로드캐스트 프레임을 수신하면 해당 프레임을 수신한 포트를 제외한 모든 포트로 전송합니다. 이를 통해 브로드캐스트 프레임의 전송을 최소화하고, 네트워크 대역폭을 절약할 수 있다.
  5. 가상 랜(VLAN) 지원: L2 스위치는 가상 랜(VLAN)을 지원하여 네트워크를 논리적으로 분리할 수 있다. 각 VLAN은 논리적으로 분리된 네트워크로, 서로 다른 VLAN 간에는 라우터를 사용하여 통신할 수 있다.

#### 비용

- 패킷은 스위치로 이동할 때마다 비용이 드는데, 이를 매트릭(Matric) 값이라고 한다.
- 매트릭 확인 방법은 cmd - route PRINT를 쳐서 확인할 수 있다.

#### 정리

- 라우팅 테이블 : 이정표 
- 라우터 (L3 스위치) : 교차로
- 자동차 : 패킷
- 도로 : 네트워크 망
