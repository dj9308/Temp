# APACHE SPARK

- 정의 : 빅데이터 처리를 위한 오픈소스 별렬분산처리 플랫폼
  스트림처리와 머신러닝을 효과적으로 수행.

- 스칼라 라는 언어로 만들어짐.

- 구조 : 복수의 컴포넌트로 구성. 병렬분산처리 엔진에 해당하는 스파크 코어를 중심으로 용도에 맞는 
  여러 라이브러리 제공.
  EX): SQL처리용(스파크 SQL), 스파크 스트리밍, MLlib(머신러닝용), 그래프X 

- ### 특징

  - 반복처리와 연속으로 이루어지는 변환처리의 고속화
    - 맵리듀스 : 데이터 지역성을 의식한 처리와 내결함성, 확장성 등의 기능을 조합적으로 제공.
      - 구조 : 입력 데이터를 스토리지에서 읽기 => 복수의 머신에서 분산처리를 수행 => 스토리지에 보존
      - 한 번에 끝나지 않는 경우 데이터가 플로(flow) 형식으로 처리되어 읽기, 분산처리, 보존으로 반복 수행.
      - 단점: 특정 데이터의 부분집합에 대해 여러번 처리하는 앱은 효율적 처리가 어려움. 
        중간 데이터셋을 메모리에 유지할 수 없어 매번 디스크에 보존 후 다시 읽어 메모리에 로드해야 함.
    - 이에 비해 스파크는 연속 처리 전체를 검토 후 최적화 처리를 끼워 넣는 방식
      : 맵리듀스보다 스파크가 고속으로 처리 및 완전 대체 가능.(HDD와의 I/O를 줄였기 때문.)
  - 시행착오에 적합한 환경 제공
    - 보통 한 대의 서버 용량이 넘어가면 R, 파이썬 등의 툴로 처리가 어려움.
    - 여러 대의 머신으로 병렬분산처리=> 피하는 것이 바람직.
    - 스파크는 병렬 분산 환경을 의식 안함.
  - 서로 다른 처리를 통합해 이용할 수 있는 환경

## RDD

- 정의 : 스파크의 데이터 처리 자료구조. RDD를 가공해 새로운 RDD를 만들고 이러한 처리를 반복하여 원하는 결과를 얻는 형태. 대량의 데이터를 요소로 가지는 분산 컬렉션.
  거대한 배열이나 리스트등의 자료구조와 동일.
- 특징 : 여러 머신으로 구성된 클러스터 환경에서의 분산처리를 전제로 설계.
  - 내부는 파티션이라는 단위로 나뉨. => 분산 처리 단위.
  - RDD를 파티션 단위로 여러 머신에서 처리하므로 한 대의 머신으로 처리할 수 있는 것보다 더 큰 데이터를 다룰 수 있음.
  - RDD 로드 => RDD 가공 형식으로 대량의 데이터 분산 처리.
  - 내부 요소 값이 변경 불가한 성질, 생성이나 변환이 지연 평가되는 성질(불변)이 있다.
- 순서 : 







## scalar 구문



| parallelize() | 스칼라 컬렉션 객체를 이용해서 RDD 객체를 생성한다.           |
| ------------- | ------------------------------------------------------------ |
| count()       | RDD의 요소 개수를 리턴한다.                                  |
| first()       | RDD 객체의 첫 번째 요소를 리턴한다.                          |
| collect()     | RDD 객체의 모든 요소를 배열로 리턴한다.                      |
| map()         | 입력 RDD의 모든 요소에 f를 적용한 결과를 저장한 RDD를 반환.  |
| flatMap()     | 입력 RDD의 모든 요소에 f를 적용하고 모든 요소들을 하나로 묶어서 반환. |
| filter()      | 입력 RDD의 모든 요소에 f를 수행하고 참을 리턴하는 결과만 반환 |
| reduce()      | 지정된 f를 수행시켜 개수를 축소시켜 생성된 RDD 반환          |
| reduceByKey() | 키값을 기준으로 f 수행후 반환                                |
| groupBy()     | 입력 RDD의 모든 요소에 f를 적용한 결과로 그루핑된 RDD 반환   |





### 정규표현식

- [링크](https://link.springer.com/content/pdf/bbm%3A978-1-4302-0709-2%2F1.pdf)

  

